{% load socialaccount %}

{% comment %} navbar 생성 {% endcomment %}
<div id = 'nav-bar' class = 'fixed-top'> 
    
    <div class = "row">
        {% comment %} 연결 페이지 {% endcomment %}
        <div class = "col-8">
            <a href = '/'> Home </a>
            <a href = '/about_me/'> About Me</a>
            <a href = '/blog/'> Blog </a>
            <a href = '/program/'> Program </a>
            <a href = '/ml/'> ML </a>
        </div>   

        {% comment %} 로그인 {% endcomment %}
        <div class = "col-4">
            {% comment %} 로그인 했을 때, navbar엔 아이디가 나타나고 드롭다운에 logout 기능 생성 {% endcomment %}
            {% if user.is_authenticated %}
            <a class = "nav-link dropdown-toggle" href ="#" id = "navbarDropdownMenuLink" role = "button" data-toggle = "dropdown"
            aria-haspopup = "true" aria-expanded = "false">
                {{user.username}}
            </a>
            
            <div class = "dropdown-menu" aria-labelledby = "navbarDropdownMenuLink">
                <span class="dropdown-item-text">로그인 </span>
                <a class = "dropdown-item" href = "/accounts/logout/"> &nbsp;&nbsp;Log Out</a>
            </div>

            {% comment %} 아니면 로그인 창 나타나도록 {% endcomment %}
            {% else %}
                <a role = "button" href="{% provider_login_url 'google' %}"  data-toggle="modal" data-target="#loginModal">
                    {% comment %} <i class="fa-solid fa-right-to-bracket"></i> {% endcomment %}
                    Log In 
                    {% comment %} <i class="fa-solid fa-caret-down"></i></i> {% endcomment %}
                </a>
            {% endif %}

        </div>
    </div>
</div>

{% comment %} modal 생성 {% endcomment %}
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="logInModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel"> <i class="fas fa-sign-in-alt"></i>&nbsp;<b>Log In</b></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <a role="button" class="btn btn-outline-dark btn-block btn-sm " href="{% provider_login_url 'google' %}"><i class="fab fa-google"></i>&nbsp;&nbsp; Log in with Google</a>
                        <a role="button" class="btn btn-outline-dark btn-block btn-sm" href="/accounts/login/"><i class="far fa-envelope"></i>&nbsp;&nbsp; Log in with Username</a>
                    </div>
                    <div class="col-md-6">
                        <a role="button" class="btn btn-outline-dark btn-block btn-sm" href="/accounts/signup/"><i class="far fa-envelope"></i>&nbsp;&nbsp; Sign Up with E-mail</a>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-design" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>